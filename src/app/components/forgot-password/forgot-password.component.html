<section class="bg-main shadow-md p-2 my-8 rounded-lg max-md:w-3/4 md:w-2/3 lg:w-2/4 mx-auto ">
    <h1 class="text-center text-secondary my-4 text-3xl ">Forgot Password</h1>

    @if (step == 1) {
        <form [formGroup]="verifyEmail" class="px-2" (ngSubmit)="submitVerifyEmail()">
            <div class="my-2 flex flex-col">
                <label for="email">email</label>
                <input
                [ngClass]="{
                'is-valid': !verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched || verifyEmail.get('email')?.dirty),
                'is-invalid': verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched || verifyEmail.get('email')?.dirty),
                }"
                formControlName="email" placeholder="email" type="email" id="email" class="form-control">
            
                @if (verifyEmail.get('email')?.errors &&(verifyEmail.get('email')?.touched || verifyEmail.get('email')?.dirty)) {
                    <div class="bg-red-300 border rounded-lg p-4 border-red-700 text-red-800">
                        @if (verifyEmail.get('email')?.getError('required')) {
                            <p>This Field is Required</p>
                        }
                        @else if (verifyEmail.get('email')?.getError('email')) {
                            <p>this field must be a valid email</p>
                        }
                    </div>
                }
            </div>
    
            <button [disabled]="verifyEmail.invalid || isLoading" class="btn-main block ms-auto">
                Verify Email
                @if (isLoading) {
                    <span><i class="fas fa-spin fa-spinner"></i></span>
                }
            </button>
        </form>
    }
    @else if (step == 2) {
        <form [formGroup]="verifyCode" class="px-2" (ngSubmit)="submitVerifyCode()">
            <div class="my-2 flex flex-col">
                <label for="resetCode">resetCode</label>
                <input
                [ngClass]="{
                'is-valid': !verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty),
                'is-invalid': verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty),
                }"
                formControlName="resetCode" placeholder="resetCode" type="text" id="resetCode" class="form-control">
            
                @if (verifyCode.get('resetCode')?.errors &&(verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty)) {
                    <div class="bg-red-300 border rounded-lg p-4 border-red-700 text-red-800">
                        @if (verifyCode.get('resetCode')?.getError('required')) {
                            <p>This Field is Required</p>
                        }
                        @else if (verifyCode.get('resetCode')?.getError('pattern')) {
                            <p>Invalid Code</p>
                        }
                    </div>
                }
            </div>
    
            
    
            <button [disabled]="verifyCode.invalid || isLoading" class="btn-main block ms-auto">
                Verify Code
                @if (isLoading) {
                    <span><i class="fas fa-spin fa-spinner"></i></span>
                }
            </button>
        </form>
    }
    @else if (step == 3) {
        <form [formGroup]="resetPassword" class="px-2" (ngSubmit)="submitResetPass()">
            <div class="my-2 flex flex-col">
                <label for="email">email</label>
                <input
                [ngClass]="{
                'is-valid': !resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty),
                'is-invalid': resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty),
                }"
                formControlName="email" readonly placeholder="email" type="email" id="email" class="form-control">
            
                @if (resetPassword.get('email')?.errors &&(resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty)) {
                    <div class="bg-red-300 border rounded-lg p-4 border-red-700 text-red-800">
                        @if (resetPassword.get('email')?.getError('required')) {
                            <p>This Field is Required</p>
                        }
                        @else if (resetPassword.get('email')?.getError('email')) {
                            <p>this field must be a valid email</p>
                        }
                    </div>
                }
            </div>
    
            <div class="my-2 flex flex-col">
                <label for="newPassword">newPassword</label>
                <input
                [ngClass]="{
                'is-valid': !resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty),
                'is-invalid': resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty),
                }"
                formControlName="newPassword" placeholder="newPassword" type="password" id="newPassword" class="form-control">
            
                @if (resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty)) {
                    <div class="bg-red-300 border rounded-lg p-4 border-red-700 text-red-800">
                        @if (resetPassword.get('newPassword')?.getError('required')) {
                            <p>This Field is Required</p>
                        }
                        @else if (resetPassword.get('newPassword')?.getError('pattern')) {
                            <p>this field must be more than 6 characters</p>
                        }
                    </div>
                }
            </div>
    
            <button [disabled]="resetPassword.invalid || isLoading" class="btn-main block ms-auto">
                Verify Email
                @if (isLoading) {
                    <span><i class="fas fa-spin fa-spinner"></i></span>
                }
            </button>
        </form>
    }

</section>